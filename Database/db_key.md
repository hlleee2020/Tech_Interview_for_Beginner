# 💡 1. DB 테이블 용어 정리

## 🔑 1.1 릴레이션

<img src=".\img\db_key_7.png">

#### 튜플(행)들의 집합

- 한 attibute 내의 값들은 모두 같은 유형
- 각 attibute 들의 순서는 중요치 X
- 동일한 튜플이 2개 이상 존재X
- 튜플들의 순서는 상관X
- 각 attribute 이름은 한 릴레이션 내에서만 고유하면 됨

#### 릴레이션 키

- 각 튜플을 고유하게 식별할 수 있는 하나 이상의 attribute들의 모임
- 두 릴레이션을 서로 연관시킬 때 사용
- 인덱스 만들 때 사용

### 1.1.1 릴레이션 스키마 (relation schema) - 내포

- 릴레이션 이름과 릴레이션 attibute들의 집합
- 표기법: 릴레이션 이름 (attribute1, attribute2, attribute3 . . . attribute N)
- 학생(학번, 이름, 주민번호, ...)

### 1.1.2 릴레이션 인스턴스(relation instance)

- 릴레이션에 어느 시점에 들어 있는 튜플들의 집합
- 시간의 흐름에 따라 계속 변함
- 일반적으로 릴레이션에는 현재의 인스턴스만 저장

<img src=".\img\db_key_8.png">

## 🔑 1.2 Tuple(=record)

- 테이블에서 행
- 튜플은 릴레이션 내에서 같은 값을 가질 수 없다.
- 튜플의 수는 Cardinality 라고 한다.

## 🔑 1.3 Attribute(=field)

- 테이블에서 열을 의미
- 같은 말로는 칼럼.
- attribute 수는 degree 라고 한다.

## 🔑 1.4 domain

- 한 attribute에 나타날 수 있는 값들의 집합
- 동일한 도메인이 여러 attribute에서 사용될 수 있음

<img src=".\img\db_key_9.png">

### 1.4.1 차수

- 한 릴레이션(테이블)에 들어있는 attribute들의 수
- 유효한 릴레이션의 최소 차수는 1
- 릴레이션의 차수는 자주 바뀌지X

### 1.4.2 카디날리티

- 릴레이션의 tuple 갯수
- 유효한 릴레이션은 카디날리티 0을 가질 수 있음
- 릴레이션의 카디날리티는 시간이 지남에 따라 계속해서 변함

---

💡 참고 ) NULL 값의 3가지 의미

- 부적절한 값
- 적절하지만, 알려지지 않은 값
- 적절한 값이고, 알려진 값이지만 DB에 입력하지 않은 값

# 💡 2. KEY 종류 용어 정리

<img src=".\img\db_key_1.png">

## 🔑 2.1 super key(슈퍼키)

### 유일성을 만족하는 키

- 7조라는 팀에 팀원을 4명이 있다. 이 4명을 구분할 수 있는 것은 절대 겹치지 않는 학번일 수도, 주민 번호일 수도 있다.

- 이름과 나이를 묶어서 하나의 속성으로 만드는 것도 가능하다. 이름과 나이를 합쳐서 7조 안에서 중복만 되지 않는다면 가능! 이름과 나이를 합쳐서 4명을 구분할 수 있으면 슈퍼키가 될 수 있다.

- {학번+주빈번호}, {학번+주민번호+이름}, {학번+주민번호+이름+나이} 모두 가능!

<img src=".\img\db_key_2.png">

### 어떤 속성 값끼리 묶던 중복값이 안나오고 서로 구별만 할 수 있으면 된다!

## 🔑 2.2 composite key(복합키)

2개 이상의 속성(attribute)를 사용한 키

## 🔑 2.3 candidate key (후보키)

### 유일성+최소성을 만족하는 키.

기본 키가 될 수 있는 후보이기 때문에 후보키라고 불린다.

<img src=".\img\db_key_3.png">

- 슈퍼키들 중에서 최소한의 속성 개수로 4명을 구분할 수 있는 키 (조합)

- 학번 슈퍼키, 주민번호 슈퍼키는 속성들이 각 1개씩 이루어져 있다. 하지만 이름+나이 슈퍼키는 2개의 속성으로 되어있다. 최소성을 만족하지 못하므로 후보키가 될 수 없다.

- ex. 주민등록번호(O), 학번(O), {이름+나이} (X)

## 🔑 2.4 Primary key (기본키)

### 후보키에서 선택된 키.

- 테이블 당 기본키는 오직 1개
- NULL 값이 들어갈 수 없으며, 기본 키로 선택된 속성(attribute)은 동일한 값이 들어갈 수 없다.

## 🔑 2.5 대체키

### 후보키 중 기본키로 선택되지 않은 키

- 후보키로 학번과 주민 번호가 뽑혔고, 둘 중에서 기본 키는 학번이 되었다. 학번이 기본 키가 되고, 남은 후보키인 주민 번호는 대체 키가 될 수 있다. 학번 기본키가 없어지게 되면 주민 번호는 없어진 기본키를 대체할 수 있게 된다.

<img src=".\img\db_key_5.png">

## 🔑 2.6 외래키

### 어떤 테이블(Relation)의 기본 키(PK)를 참조하는 속성.

테이블(Relation)들 간의 관계를 나타내기 위해서 사용

<img src=".\img\db_key_6.png">

- 참조될 테이블 (A)이 먼저 만들어지고, 참조하는 테이블(B)에 값이 입력되어야 한다.
- 이때, 참조될 (A) 열의 값은 참조될 (A) 테이블에서 기본 키(PK)로 설정되어 있어야 한다.
- 외래 키는 참조되는 테이블의 기본 키와 **동일한 키 속성을 갖는다.**
- 참조되는 부모 테이블이 먼저 생성된 뒤 데이터를 넣고, 참조하는 자식 테이블이 다음에 생겨야 된다.
- **부모 테이블 먼저 삭제될 수 없다.** 왜냐하면 부모 테이블을 참조하는데 부모 테이블이 삭제되면 자식 테이블은 참조하는 것이 없어지기 때문에 외래키 오류가 생긴다. 따라서 외래키 관계에서 **부모 테이블을 삭제하려면 자식 테이블 먼저 삭제 필수!**

---

[출처]

https://inpa.tistory.com/entry/DB-%F0%9F%93%9A-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%9A%A9%EC%96%B4-%F0%9F%95%B5%EF%B8%8F-%EC%A0%95%EB%A6%AC?category=890807
https://inpa.tistory.com/entry/DB-%F0%9F%93%9A-%ED%82%A4KEY-%EC%A2%85%EB%A5%98-%F0%9F%95%B5%EF%B8%8F-%EC%A0%95%EB%A6%AC
